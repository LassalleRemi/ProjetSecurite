<!DOCTYPE html>
 <%@page import="java.sql.*, metier.Personne" errorPage="ErrorPage.jsp"%>
<html>
<head>
<%@ page pageEncoding="UTF-8" %>
<title> MaPage </title>
</head>
<body>
  <h1>Table users</h1>
  <% Class.forName("org.postgresql.Driver");
     String url = "jdbc:postgresql://psqlserv/n3p1";
     String nom = "lassallr";
     String mdp = "moi";
     Connection con = DriverManager.getConnection(url,nom,mdp);
     Statement stmt= con.createStatement();
     %>
  <table border="1">
    <tr>
      <th>login</th>
      <th>mdp</th>
      <th>nom</th>
      <th>prenom</th>
      <th>role</th>
      <th>adresse</th>
    </tr>
    <%
      ResultSet rs = stmt.executeQuery("select * from users;");
      while(rs.next()){%>
    <tr>
      <% for(int i=1;i<=6;i++){ %>
	 <td> <%= rs.getString(i) %> </td>
      <% }
      }
      con.close();
    %>
       </tr>
  </table>
  <% Personne p = (Personne)session.getAttribute("personne");
     if (p==null){
       p = new Personne();
       session.setAttribute("personne",p);
     }
     Personne global = (Personne)application.getAttribute("global");
     if (global==null){
       global = new Personne();
       application.setAttribute("global",global);
     }%>
  <%=p%>
  <%=global%>
</body>
</html>
